### 1.什么是 React?

React 是一个由 FaceBook 开发维护的 Javascript 库，用于构建用户界面，特别是单页面应用

它的主要特点:

1. 虚拟 DOM
2. 声明式编程
3. JSX
4. 组件化
5. 单向数据流
6. 生态丰富

### 2. 什么是虚拟 DOM

- 虚拟 DOM

  - 因为直接操作虚拟 DOM 代价高昂，可能会引起浏览器的重排和重绘
  - 虚拟 DOM 其实是一个真实 DOM 的轻量级表示，本质上就是一个 JS 对象，映射为真实 DOM 的结构和属性
  - 引入虚拟 DOM 的目的是为了最小化与真实 DOM 的次数，从而提高性能。

- 工作机制

  - 当初次渲染的时候，会先创建一个描述 UI 的虚拟 DOM,然后由 React 负责把此虚拟 DOM 编程真实 DOM 并渲染到页面
  - 当某个部分发生变化的时候，比如用户输入或者数据变化，React 会创建一个新的虚拟 DOM 并与老的虚拟 DOM 进行对比，找出两者的差异，这就是所谓的 DOM-DIFF.
  - 找到后确定应还如何最小的修改真实 DOM,以反应 UI 的变化。最后 React 会负责把这些更新映射到真实 DOM,让界面上的真实 DOM 和新的虚拟 DOM 一致

- 优势
  - 性能提升了 批量修改真实 DOM，另外只会进行最小化的更新，只修改必要的部分，可以避免昂贵的 DOM 操作和不必要的重排重绘
  - 简化编程 开发者不需要关心如何操作 DOM,只需要声明 UI 外观就可以。
  - 跨平台 因为虚拟 DOM 只是普通的 JS 对象，就可以在不同的环境复用相同的逻辑 ReactNative

### 3. 为什么 React 要使用 jsx?

JSX 提供了一种更直观的方式，以声明的方式来描述 UI, 并且在编写 UI 代码的时候保持 JS 的功能

- 1. **声明式的语法** JSX 提供了一种看起来很像 HTML 的语法，能够直观的描述 UI 的外观和结构，这样可以让代码更易读和易于维护
- 2. **组件化** 通过 JSX ，我们可以直接在 JSX 中定义组件，这使得 UI 的复用、测试和关注点的分离更简单。
- 3. **整合能力** 由于 JSX 本质上还是 JS, 所以我们可以在其中插入任意有效的 JS 表达式，也可能把 JS 当做函数的参数或者返回值，这样的话为 UI 组件的创建提供了灵活性

除了 JSX 还有别的方案吗？ 其他方案为啥没有选择呢？

1. 纯 JS, React.createElement 纯 js 写法，但是会使代码变得冗长并难以阅读, 尤其是在 UI 特别负责的情况，与此相反，JSX 更简洁，更直观
2. 模板语言 在传统的前端框架中经常会使用模板来定义描述 UI, 比如 Angular、Vue. 虽然模板是声明式的，但是它会带来额外的学习成本，需要学习模板的编写方法。比如 Vue 指令，另外它不可以使用全量的 JS 功能，无法使用完整的 JS 功能。
3. 字符串模板拼接 直接使用字符串拼接最大的问题就是不安全，同意受到 xss 攻击也就是跨站脚本攻击。而 jsx 会自动进行安全转译，可以从根本上防止这种攻击。

### 4. 类组件和函数组件有什么区别？

React 组件是独立的、可重用的代码片段，用于描述 UI 的一部分
组件可以是简单的 UI,可以是一个简单的按钮，也可以是一个复杂的容器，比如一个页面

相同点:

1. 功能都是渲染 UI，目标渲染
2. 都可以接收属性，并返回虚拟 DOM, 并进行渲染
3. 从本质来说，它们表现的结果是一样的·

不同点:

1. 类组件，基于面相对象编程思想，使用 Es6 的类的语法，需要掌握 this
2. 函数组件是基于函数式编程，更简单容易理解。

### 5. 什么是 React 中的合成事件

React 中的合成事件 (SyntheticEvent) 是为了解决跨浏览器一致性而设计的
它是一个浏览器原生事件的跨浏览器包装器,具有和原生事件相同的接口, 但提供了更多的功能保持浏览器行为的一致性的特性

### 浏览器中的事件模型

事件可以在 DOM 上进行监听和处理

1. 事件流 描述了页面中接收事件的顺序,主要分为两个阶段, 捕获阶段 -> 冒泡阶段

- 捕获阶段: 事件从根节点开始,向下传递至目标的外层,但不包括目标元素本身
- 目标阶段: 事件在目标元素上触发
- 冒泡阶段: 事件从目标元素开始,向上传递至最外层

2. 事件监听器 可以在 使用 JS DOM 元素上添加事件监听器来响应特定的事件
3. 事件对象 当事件发生时,事件监听器会收到事件对象 event
4. 取消默认行为 event.preventDefault() event.returnValue = false;
5. 停止事件传播 event.stopPropagation() cancelBubble = true

#### 为什么 React 会使用合成事件?

1. 提供浏览器的一致性
2. 为了性能 在合成事件中,根据浏览器冒泡的特性,可以在父元素监听子元素的事件,不需要把事件绑定到每个子元素上,而只需要在根节点绑定一次就可以.其实是用了事件委托.

#### 合成事件在 React17 前后发生了重大变化

react17 之前合成事件是委托给了文档对象
react18 之后委托给了 root 根节点
